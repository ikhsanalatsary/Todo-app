<!DOCTYPE Html>
<html ng-app= "todoApp">
<head>
	<title>Todo App</title>
	<!-- bower:css -->
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css">
	<!-- endcss -->
	<!-- inject:css -->
	<link rel="stylesheet" type="text/css" href="css/main.css">
	<!-- endcss -->
</head>
<body ng-controller="TodoCtrl as vm">
	<h1>Todos</h1>
	<div ng-hide="vm.checkSomething()" ng-cloak>
		<h2>Register</h2>
		<form class="form-inline" ng-submit="vm.register(vm.model.email, vm.model.password)">
			<label>Email <input type="email" class="form-control" placeholder="Email" ng-model=vm.model.email> </label>
			<label>Password <input type="password" class="form-control" placeholder="Password" ng-model=vm.model.password> </label>
			<button type="submit" class="btn btn-default">Register</button>
		</form>
	</div>

	<hr>

	<div ng-hide="vm.user" ng-cloak>
		<h2>Login</h2>
		<form class="form-inline" ng-submit="vm.login(vm.email, vm.password)">
			<label>Email <input type="email" class="form-control" placeholder="Email" ng-model=vm.email> </label>
			<label>Password <input type="password" class="form-control" placeholder="Password" ng-model=vm.password> </label>
			<button type="submit" class="btn btn-primary" name="login">Login</button>
		</form>
	</div>

	<section ng-show="vm.user" ng-cloak>
		<header>
			<h2>Welcome {{vm.user.email}}</h2>
				<form id="todo-desc" ng-submit="vm.addTodo(vm.description)">
					<input type="text" class="form-control" placeholder="What's up?" ng-model="vm.description" ng-disabled="vm.saving" autofocus>
					<pre ng-bind="vm.description"></pre>
				</form>
		</header>
		<section>
			<input id="toggle-all" type="checkbox" ng-model="vm.allChecked" ng-click="vm.markAll(vm.allChecked)">
			<label for="toggle-all">Mark all as complete</label>
			<ul id="todo-list">
				<li class="list-unstyled" ng-repeat="todo in vm.todos | startFrom:vm.currentPage*vm.pageSize | limitTo:vm.pageSize" ng-class="{completed: todo.completed, editing: todo == vm.editedTodo}" ng-cloak>
					<div class="view">
						<input class="toggle" type="checkbox" ng-model="todo.completed" ng-change="vm.toggleCompleted(todo)">
						<label ng-dblclick="vm.editTodo(todo)">{{todo.description}}</label>
						<button type="button" class="btn btn-danger btn-xs" ng-click="vm.removeTodo(todo)">
							<span class="glyphicon glyphicon-remove"></span>
						</button>
					</div>
					<form ng-submit="vm.saveEdits(todo, 'submit')">
						<input class="edit" ng-trim="false" ng-model="todo.description" todo-escape="vm.revertEdits(todo)" ng-blur="vm.saveEdits(todo, 'blur')" todo-focus="todo == vm.editedTodo">
					</form>
				</li>
			</ul>
			<button ng-disabled="vm.currentPage == 0" ng-click="vm.currentPage=vm.currentPage-1">
				Previous
			</button>
				<span>{{vm.currentPage+1}}/{{vm.numberOfPages()}}</span>
			<button ng-disabled="vm.currentPage >= vm.getData().length/vm.pageSize - 1" ng-click="vm.currentPage=vm.currentPage+1">
				Next
			</button>
		</section>
		<button class="btn btn-default" ng-click="vm.logout()">Logout</button>
	</section>
	<footer>
		<div class="pull-right">
			<a href="https://github.com/ikhsanalatsary/Todo-app" target= "_blank">View on Github.com</a>
		</div>
	</footer>
	
	<!-- bower:js -->
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.9/angular.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
	<!-- endinject-->
	<!-- inject:js -->
	<script src="app.js"></script>
	<!-- endinject -->
</body>
</html>